<ui:composition template="/template/master_page.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:b="http://bootsfaces.net/ui"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <ui:define name="title">Employee</ui:define>

    <ui:define name="content">
        <div class="ui segment grid" id="content">
        	<b:jumbotron class="text-center">
                <h1>Manage Projects</h1>
                <span></span>
            </b:jumbotron>

            <div class="container">
                <b:row>
                	<b:row>
                		<b:column span="3">
                			<h:outputText
	                        	value="No: #{Master.projMan.selectedProject.projNo}" />
                		</b:column>
                		<b:column span="3">
                			 <h:outputText span="2"
	                        	value="Name: #{Master.projMan.selectedProject.projNm}" />
                		</b:column>
	                </b:row>
	                <b:row>   
	                    <h:outputText span="10"
	                        value="Description: #{Master.projMan.selectedProject.projDesc}" />
	                </b:row>
                </b:row>
                <b:row>
                    <b:form>
                        <h:dataTable class="table table-bordered"
                            value="#{Master.projMan.selectedProject.workPackages}"
                            var="s">
                            <h:column>
                                <f:facet name="header">Number</f:facet>
								#{s.id.wpNo}
							</h:column>
                            <h:column>
                                <f:facet name="header">Name</f:facet>
                                <b:inputText class="form-control"
                                    value="#{s.wpNm}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">Description</f:facet>
                                <b:inputText class="form-control"
                                    value="#{s.wpDesc}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">Budget Estimate</f:facet>
                                <h:dataTable class="table"
                                    value="#{s.wplabs}" var="l"
                                    rendered="#{Master.projMan.isLeaf(s)}">
                                    <h:column>
                                        <f:facet name="header">Labour Grade</f:facet>
                                        <h:outputText
                                            value="#{l.id.wlLgId}"
                                            rendered="#{not l.editable}" />
                                        <b:selectOneMenu
                                            class="form-control"
                                            value="#{l.id.wlLgId}"
                                            converter="#{labgrdConverter}"
                                            rendered="#{l.editable}">
                                            <f:selectItems
                                                class="selectpicker"
                                                value="#{Master.admin.labourGrades}" />
                                        </b:selectOneMenu>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">Person Days</f:facet>
                                        <b:inputText
                                            class="form-control"
                                            value="#{l.wlPlanDays}" />
                                    </h:column>
                                </h:dataTable>
                                <b:commandButton class="btn"
                                	look="success"
                                    value="Add row"
                                    action="#{Master.projMan.addWplabRow(s)}"
                                    rendered="#{Master.projMan.isLeaf(s)}" />
                            </h:column>

                            <h:column>
                                <b:commandButton class="btn"
                                	look="success"
                                    value="Add Child"
                                    action="#{Master.projMan.createChildWP(s)}" />
                            </h:column>
                        </h:dataTable>
                        <b:commandButton class="btn"
                        	look="success"
                            value="Add Work Package"
                            action="#{Master.projMan.createNewWP()}" />
                        <br />
                        <b:commandButton class="btn" value="Save"
                        	look="primary"
                            action="#{Master.projMan.save()}" />
                        <b:commandButton class="btn" value="Cancel"
                        	look="danger"
                            action="viewmanagedprojects"
                            immediate="true" />
                    </b:form>
                </b:row>
            </div>
        </div>
    </ui:define>
</ui:composition>
