<ui:composition template="/template/master_page.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:b="http://bootsfaces.net/ui">
    <ui:define name="title">Monthy Report</ui:define>

    <ui:define name="content">
        <div class="ui segment grid" id="content">
            <div class="container text-centered">
                <div class="jumbotron">
                    <h1>Monthly Report</h1>
                    <span></span>
                </div>
            </div>

            <div class="container">
                <b:row>
                    <b:column col-md="12">
                        <b:panelGrid colSpans="3,9" columns="2">
                            <strong>Project Number:</strong>
                            <h:outputText
                                value="#{Master.projMan.selectedProject.projNo}" />

                            <strong>Week:</strong>
                            <h:outputText
                                value="#{Master.projMan.selectedWeek}" />
                        </b:panelGrid>
                        <br />
                        
                        <b:dataTable
                        	value="#{Master.projMan.getListOfMonths()}"
                        	var="s">
                        	<b:dataTableColumn>
                        		<f:facet name="header">Month</f:facet>
                        		#{s}
                        	</b:dataTableColumn>
                        	<b:dataTableColumn>
                        		<h:dataTable class="table"
                        			value="#{Master.projMan.getLeafWorkpacks()}"
                        			var="t">
                        			<h:column>
                        				<f:facet name="header">WP#</f:facet>
                        				#{t.id.wpNo}
                        			</h:column>
                        			
                        			<h:column>
                        				<f:facet name="header">Budget(PD)</f:facet>
                        				#{Master.projMan.getReportForWpMonth(t, s).budgetTotalDays}
                        			</h:column>
                        			
                        			<h:column>
                        				<f:facet name="header">Budget($)</f:facet>
                        				<h:outputText value="#{Master.projMan.getReportForWpMonth(t, s).budgetTotalCosts}">
                                    		<f:convertNumber type="currency" />
                                		</h:outputText>
                        			</h:column>
                        			
                        			<h:column>
                        				<f:facet name="header">Current(PD)</f:facet>
                        				#{Master.projMan.getReportForWpMonth(t, s).curTotalDays}
                        			</h:column>
                        			
                        			<h:column>
                        				<f:facet name="header">Current($)</f:facet>
                        				<h:outputText value="#{Master.projMan.getReportForWpMonth(t, s).curTotalCosts}">
                                    		<f:convertNumber type="currency" />
                                		</h:outputText>
                        			</h:column>
                        			
                        			<h:column>
                        				<f:facet name="header">Projected(PD)</f:facet>
                        				<h:outputText value="#{Master.projMan.getReportForWpMonth(t, s).projTotalDays}" 
                        					rendered="#{Master.projMan.getReportForWpMonth(t, s).projTotalDays != null}"/>
                        				<h:outputText value="N/A" 
                        					rendered="#{Master.projMan.getReportForWpMonth(t, s).projTotalDays == null}"/>
                        			</h:column>
                        			
                        			<h:column>
                        				<f:facet name="header">Projected($)</f:facet>
                        				<h:outputText value="#{Master.projMan.getReportForWpMonth(t, s).projTotalCosts}"
                        					rendered="#{Master.projMan.getReportForWpMonth(t, s).projTotalCosts != null}">
                                    		<f:convertNumber type="currency" />
                                		</h:outputText>
                                		<h:outputText value="N/A"
                                			rendered="#{Master.projMan.getReportForWpMonth(t, s).projTotalCosts == null}"/>
                        			</h:column>
                        			
                        			<h:column>
                        				<f:facet name="header">Variance(PD)</f:facet>
                        				<h:outputText value="#{Master.projMan.getReportForWpMonth(t, s).getVarTime()}"
                        					rendered="#{Master.projMan.getReportForWpMonth(t, s).getVarTime() != null}">
                                    		<f:convertNumber type="percent" />
                                		</h:outputText>
                                		<h:outputText value="N/A"
                                			rendered="#{Master.projMan.getReportForWpMonth(t, s).getVarTime() == null}"/>
                        			</h:column>
                        			
                        			<h:column>
                        				<f:facet name="header">Variance($)</f:facet>
                        				<h:outputText value="#{Master.projMan.getReportForWpMonth(t, s).getVarCosts()}"
                        					rendered="#{Master.projMan.getReportForWpMonth(t, s).getVarCosts() != null}">
                                    		<f:convertNumber type="percent" />
                                		</h:outputText>
                                		<h:outputText value="N/A"
                                			rendered="#{Master.projMan.getReportForWpMonth(t, s).getVarCosts() == null}"/>
                        			</h:column>
                        		</h:dataTable>
                        	</b:dataTableColumn>
                        
                        </b:dataTable>
                    </b:column>
                </b:row>
            </div>
        </div>
    </ui:define>
</ui:composition>